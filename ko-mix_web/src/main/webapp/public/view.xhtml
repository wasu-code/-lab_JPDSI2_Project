<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jstl/core">

<ui:composition template="/templates/main.xhtml">

	<f:metadata>
		<f:viewParam name="id" value="#{entryEditBB.entry.idEntry}" />
		<f:viewAction action="#{entryEditBB.load}" />
	</f:metadata>

	<ui:define name="title">
		#{entryEditBB.entry.titleOrg}
	</ui:define>

	<ui:define name="content">
		<p:messages id="msgs" />
							
		<h:form>
			<c:if test="#{sessionScope.role == 'admin'}">
						<p:commandButton 
							value="Pozwól na Edycję przez Użytkowników"
							action="#{entryEditBB.lock(0)}" 
							icon="pi pi-lock-open" >
						</p:commandButton>
							
						<p:commandButton 
							value="Zablokuj Edycję przez Użytkowników"
							action="#{entryEditBB.lock(1)}" 
							icon="pi pi-lock" >
						</p:commandButton>
			</c:if>
		</h:form>
		<h:form>
			<p:panel header="Basic Info" styleClass="bottom-space">
				<h:panelGrid columns="2" cellpadding="5">
					<img src="#{entryEditBB.entry.coverUrl}"
						style="width: 200px; height: auto;" />
					<div class="tabrow">Original Title:
						#{entryEditBB.entry.titleOrg}</div>
					<div class="tabrow">English Title:
						#{entryEditBB.entry.titleEng}</div>
					<div class="tabrow">Aliases: #{entryEditBB.entry.aliases}</div>
				</h:panelGrid>
			</p:panel>

			<p:panel header="More Info" toggleable="true" collapsed="false"
				style="margin-bottom: 1em;">
				<h:panelGrid columns="3" cellpadding="5">
					<p:fieldset legend="Year of Publishing">#{entryEditBB.entry.publishYear}</p:fieldset>
					<p:fieldset legend="Original Language">#{entryEditBB.entry.originalLang}</p:fieldset>
					<p:fieldset legend="Reading Direction">#{entryEditBB.entry.readingDirection}</p:fieldset>
					<p:fieldset legend="Number of Chapters">#{entryEditBB.entry.chapterCount}</p:fieldset>
					<p:fieldset legend="Number of Volumes">#{entryEditBB.entry.volumeCount}</p:fieldset>
					<p:fieldset legend="Number of Pages">#{entryEditBB.entry.pageCount}</p:fieldset>
				</h:panelGrid>
			</p:panel>
			<c:if test="#{entryEditBB.entry.isLocked eq 0}">
				<p:linkButton
					outcome="/public/edit.xhtml?id=#{entryEditBB.entry.idEntry}"
					value="Edit" icon="pi pi-pencil"
					style="margin:0 10px;text-decoration: none;"></p:linkButton>
			</c:if>
			<c:if test="#{entryEditBB.entry.isLocked eq 1}">
			Brak możliwości edycji
		</c:if>
		</h:form>


	</ui:define>

</ui:composition>

</html>
